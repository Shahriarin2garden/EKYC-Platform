# ==================================
# EKYC Platform - Environment Variables
# ==================================
# This file provides templates for both local development and Render.com deployment
# Copy relevant sections based on your deployment target

# ==================================
# RENDER.COM DEPLOYMENT (Production)
# ==================================
# Add these variables in Render Dashboard > Service > Environment tab
# DO NOT commit actual values to Git

# --- Backend Service Environment Variables ---

# Server Configuration
NODE_ENV=production
PORT=5000

# Database (MongoDB Atlas - Free Tier)
# Get from: https://cloud.mongodb.com > Database > Connect
# Format: mongodb+srv://username:password@cluster.mongodb.net/database
MONGODB_URI=mongodb+srv://ekyc_user:YOUR_PASSWORD@ekyc-cluster.xxxxx.mongodb.net/ekyc_db?retryWrites=true&w=majority

# Message Queue (CloudAMQP - Free Tier)
# Get from: https://customer.cloudamqp.com > Instance Details
# Format: amqps://username:password@host.cloudamqp.com/vhost
RABBITMQ_URL=amqps://user:password@host.cloudamqp.com/vhost

# JWT Configuration
# Generate: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your_super_secret_jwt_key_minimum_32_characters_long
JWT_EXPIRES_IN=7d

# CORS Configuration
# Set to your frontend URL after deployment
FRONTEND_URL=https://ekyc-frontend.onrender.com

# AI Service (Optional)
# Get from: https://openrouter.ai/keys
OPENROUTER_API_KEY=sk-or-v1-xxxxxxxxxxxxxxxxxxxxx

# --- Frontend Service Environment Variables ---

# API Configuration (Set at build time)
# Set to your backend URL after deployment
REACT_APP_API_URL=https://ekyc-backend.onrender.com/api

# ==================================
# LOCAL DEVELOPMENT (Docker)
# ==================================
# Copy these to backend/.env for local development

# Application Environment
NODE_ENV=development

# Port Configuration
BACKEND_PORT=5000
FRONTEND_PORT=3000
MONGODB_PORT=27017
RABBITMQ_PORT=5672
RABBITMQ_MGMT_PORT=15672
MONGO_EXPRESS_PORT=8081

# MongoDB Configuration (Local Docker)
MONGODB_DB=ekyc_db
MONGODB_USER=
MONGODB_PASSWORD=
# MONGODB_URI will be constructed by docker-compose

# RabbitMQ Configuration (Local Docker)
RABBITMQ_USER=admin
RABBITMQ_PASSWORD=admin123
# RABBITMQ_URL will be constructed by docker-compose

# Mongo Express (MongoDB Admin UI)
MONGO_EXPRESS_USER=admin
MONGO_EXPRESS_PASSWORD=admin123

# JWT Configuration (Development)
JWT_SECRET=dev_secret_key_not_for_production_use_only
JWT_EXPIRES_IN=7d

# Frontend Configuration (Local)
FRONTEND_URL=http://localhost:3000
REACT_APP_API_URL=http://localhost:5000/api

# AI Service (Optional)
OPENROUTER_API_KEY=

# Docker Development Override (Uncomment for hot-reload)
# COMPOSE_FILE=docker-compose.yml:docker-compose.dev.yml

# ==================================
# DEPLOYMENT INSTRUCTIONS
# ==================================

# 1. FOR RENDER.COM:
#    a. Create MongoDB Atlas cluster (free): https://www.mongodb.com/cloud/atlas
#    b. Create CloudAMQP instance (free): https://www.cloudamqp.com
#    c. Generate JWT secret: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#    d. Add variables in Render Dashboard > Service > Environment tab
#    e. Deploy via render.yaml blueprint or manual service creation
#
# 2. FOR LOCAL DEVELOPMENT:
#    a. Copy this file to backend/.env
#    b. Use "LOCAL DEVELOPMENT" section values
#    c. Run: docker-compose up -d
#    d. Access: Backend http://localhost:5000, Frontend http://localhost:3000
#
# 3. SECURITY BEST PRACTICES:
#    - Never commit .env files to Git
#    - Use strong, random values for secrets in production
#    - Rotate secrets regularly
#    - Use different values for dev/staging/production
#    - Enable 2FA on all service accounts

# ==================================
# QUICK REFERENCE
# ==================================

# Generate JWT Secret:
# node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"

# Test Backend Health:
# curl https://your-backend.onrender.com/api/health

# Create First Admin:
# curl -X POST https://your-backend.onrender.com/api/admin/register \
#   -H "Content-Type: application/json" \
#   -d '{"name":"Admin","email":"admin@example.com","password":"SecurePass123!"}'

# MongoDB Atlas Setup:
# 1. Create cluster > Create user > Whitelist IP (0.0.0.0/0) > Get connection string

# CloudAMQP Setup:
# 1. Create instance > Select "Lemur" (free) > Copy AMQP URL

# See RENDER_DEPLOYMENT_GUIDE.md for complete deployment instructions
